# Chimera Operator Configuration
# v7.1

server:
  host: "0.0.0.0"
  port: 8080
  request_timeout_ms: 30000

rpc:
  primary_provider: "helius"
  # Override via CHIMERA_RPC__PRIMARY_URL env var
  primary_url: "https://api.devnet.solana.com"
  # Override via CHIMERA_RPC__FALLBACK_URL env var
  fallback_url: "https://api.devnet.solana.com"
  rate_limit_per_second: 40
  timeout_ms: 2000
  max_consecutive_failures: 3

database:
  path: "data/chimera.db"
  max_connections: 5

security:
  # Overridden by CHIMERA_SECURITY__WEBHOOK_SECRET
  webhook_secret: "dev-secret-placeholder"
  max_timestamp_drift_secs: 60
  webhook_rate_limit: 100
  webhook_burst_size: 150

circuit_breakers:
  max_loss_24h_usd: 500
  max_consecutive_losses: 5
  max_drawdown_percent: 15
  cooldown_minutes: 30

strategy:
  shield_percent: 70
  spear_percent: 30
  max_position_sol: 1.0
  min_position_sol: 0.01

jito:
  enabled: false
  tip_floor_sol: 0.001
  tip_ceiling_sol: 0.01
  tip_percentile: 50
  tip_percent_max: 0.10

queue:
  capacity: 1000
  load_shed_threshold_percent: 80

token_safety:
  # Known safe tokens (allowed to have freeze/mint authority)
  freeze_authority_whitelist:
    - "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"  # USDC
    - "Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"  # USDT
    - "So11111111111111111111111111111111111111112"   # Wrapped SOL
  mint_authority_whitelist:
    - "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"  # USDC
    - "Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB"  # USDT
    - "So11111111111111111111111111111111111111112"   # Wrapped SOL
  # Minimum liquidity thresholds (USD)
  min_liquidity_shield_usd: 10000
  min_liquidity_spear_usd: 5000
  # Enable honeypot detection via transaction simulation
  honeypot_detection_enabled: true
  # Token cache settings
  cache_capacity: 1000
  cache_ttl_seconds: 3600  # 1 hour

# Notification settings
notifications:
  telegram:
    enabled: true
    # Set via environment: TELEGRAM_BOT_TOKEN
    bot_token: "${TELEGRAM_BOT_TOKEN}"
    # Set via environment: TELEGRAM_CHAT_ID  
    chat_id: "${TELEGRAM_CHAT_ID}"
    rate_limit_seconds: 60
  rules:
    circuit_breaker_triggered: true
    wallet_drained: true
    position_exited: true
    wallet_promoted: true
    daily_summary: true
    rpc_fallback: true
  daily_summary:
    enabled: true
    hour_utc: 20  # 8 PM UTC
    minute: 0
